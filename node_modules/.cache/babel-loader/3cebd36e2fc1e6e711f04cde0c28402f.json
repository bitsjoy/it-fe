{"ast":null,"code":"var _jsxFileName = \"/Users/neeleshsharma/Desktop/bitsjoy/it-fe/src/pages/noteMaker/index.js\",\n    _s = $RefreshSig$();\n\nimport { Col, Row, Collapse, Button, Input } from 'antd';\nimport axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport Viewer from './viewer';\nimport { Editor } from '@tinymce/tinymce-react';\nimport ButtonPrimary from '../../components/Button';\nimport { BackwardFilled, BackwardOutlined, CloseSquareOutlined, DeleteOutlined, EditOutlined, FileAddOutlined, FolderAddOutlined, LoadingOutlined, PlusCircleOutlined, PlusOutlined, StepBackwardOutlined, SyncOutlined } from '@ant-design/icons';\nimport { API_BASE } from '../../apiConfig';\nimport { bearer_token_key } from './../../localStorageConfig';\nimport { toast } from 'react-toastify';\nimport { noteMaker } from '../../assets';\nimport { btnBackgroundColor } from '../../uiConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function NoteMaker() {\n  _s();\n\n  const [currentNoteId, setCurrentNoteId] = useState(null);\n  const [currentNoteTitle, setCurrentNoteTitle] = useState(null);\n  const [currentBook, setCurrentBook] = useState(null);\n  const [currentNoteBody, setCurrentNoteBody] = useState(\"<p>No content, edit note to add content</p>\");\n  const [edit, setEdit] = useState(false);\n  const [notes, setNotes] = useState(null);\n  const [newNoteWindow, setNewNoteWindow] = useState(false);\n  const [loadingNoteBody, setLoadingNoteBody] = useState(false);\n  const [savingNoteProcess, setSavingNoteProcess] = useState(false);\n  const [updatingNoteProcess, setUpdatingNoteProcess] = useState(false);\n  const [deleteNoteProcess, setDeleteNoteProcess] = useState(false);\n  const editorRef = useRef(null);\n  useEffect(() => {\n    //alert(\"1\");\n    if (notes == null) {\n      axios.post(API_BASE + '/api/user/getUserNotes', {\n        email: localStorage.getItem('bitsjoy_email')\n      }, {\n        headers: {\n          'Authorization': localStorage.getItem(bearer_token_key),\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        setNotes(Object.keys(res.data.notes).sort().reduce((accumulator, key) => {\n          accumulator[key] = res.data.notes[key];\n          return accumulator;\n        }, {}));\n        console.log(res.data);\n      }).catch(err => {\n        toast.error(err.message);\n      });\n    }\n  }, []);\n  useEffect(() => {\n    if (currentNoteId != null && currentNoteId != \"\") {\n      setLoadingNoteBody(true);\n      console.log(currentNoteId);\n      axios.post(API_BASE + '/api/notes/getNote', {\n        noteId: currentNoteId,\n        idOfAccessor: localStorage.getItem('bitsjoy_userId')\n      }, {\n        headers: {\n          'Authorization': localStorage.getItem(bearer_token_key),\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        setCurrentNoteBody(res.data.body);\n        setLoadingNoteBody(false); //  alert(res.data.body);\n      }).catch(err => {\n        toast.error(err.message);\n        setLoadingNoteBody(false);\n      });\n    }\n  }, [currentNoteId]);\n\n  const closeViewer = () => {\n    setCurrentNoteId(null);\n  };\n\n  const saveNote = () => {\n    console.log(editorRef.current.getContent());\n    setSavingNoteProcess(true);\n    const date = new Date();\n\n    if (editorRef.current) {\n      console.log(editorRef.current.getContent());\n      axios.post(API_BASE + '/api/notes/createNote', {\n        \"dateUpdated\": date,\n        \"dateCreated\": date,\n        \"title\": currentNoteTitle,\n        \"body\": editorRef.current.getContent() == \"\" ? \"<i>No content, edit note to add content</i>\" : editorRef.current.getContent(),\n        \"author\": {\n          id: localStorage.getItem('bitsjoy_userId'),\n          fullName: localStorage.getItem('bitsjoy_name'),\n          ppImageLink: localStorage.getItem('bitsjoy_ppImageLink')\n        },\n        \"accessibleTo\": [localStorage.getItem('bitsjoy_userId')],\n        \"bookTitle\": currentBook\n      }, {\n        headers: {\n          'Authorization': localStorage.getItem(bearer_token_key),\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        console.log(res);\n        window.location.reload();\n        setSavingNoteProcess(false);\n      }).catch(err => {\n        toast.error(err.response.data.message);\n        setSavingNoteProcess(false);\n      });\n    }\n  };\n\n  const updateNote = () => {\n    setUpdatingNoteProcess(true);\n    const date = new Date();\n\n    if (editorRef.current) {\n      console.log(editorRef.current.getContent());\n      axios.put(API_BASE + '/api/notes/updateNote', {\n        \"dateUpdated\": date,\n        \"title\": currentNoteTitle,\n        \"noteBody\": editorRef.current.getContent() == \"\" ? \"<i>No content, edit note to add content</i>\" : editorRef.current.getContent(),\n        \"authorId\": localStorage.getItem('bitsjoy_userId'),\n        \"accessibleTo\": [localStorage.getItem('bitsjoy_userId')],\n        \"bookTitle\": currentBook,\n        \"noteId\": currentNoteId\n      }, {\n        headers: {\n          'Authorization': localStorage.getItem(bearer_token_key),\n          'Content-Type': 'application/json'\n        }\n      }).then(res => {\n        console.log(res);\n        toast.success(\"Note updated\");\n        setUpdatingNoteProcess(false);\n      }).catch(err => {\n        toast.error(err.data.response.message);\n        setUpdatingNoteProcess(false);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      id: \"lp\",\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        xs: {\n          span: 0\n        },\n        md: {\n          span: 18\n        },\n        children: [edit && /*#__PURE__*/_jsxDEV(\"div\", {\n          align: \"right\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            required: true,\n            type: \"text\",\n            value: currentNoteTitle,\n            onChange: e => {\n              setCurrentNoteTitle(e.target.value);\n            },\n            style: {\n              fontWeight: '700'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Editor, {\n            onInit: (evt, editor) => editorRef.current = editor,\n            initialValue: currentNoteBody,\n            init: {\n              height: 500,\n              menubar: false,\n              plugins: ['advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview', 'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen', 'insertdatetime', 'media', 'table', 'code', 'help', 'wordcount'],\n              toolbar: 'undo redo | ' + 'bold italic forecolor | alignleft aligncenter ' + 'alignright alignjustify | bullist numlist outdent indent | ' + 'removeformat | help',\n              content_style: 'body {font-weight: 300; font-size:14px;}'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 25\n        }, this), newNoteWindow && /*#__PURE__*/_jsxDEV(\"div\", {\n          align: \"left\",\n          children: [\"Collection Name: \", /*#__PURE__*/_jsxDEV(Input, {\n            id: \"collectionName\",\n            type: \"text\",\n            value: currentBook,\n            onChange: e => {\n              let val = e.target.value.toString().toLowerCase().replace(/\\b(\\w)/g, x => x.toUpperCase());\n              setCurrentBook(val.trim() == \"\" ? null : val);\n            },\n            style: {\n              fontWeight: '700',\n              textTransform: 'capitalize'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 34\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, this), \"Note Title : \", /*#__PURE__*/_jsxDEV(Input, {\n            type: \"text\",\n            value: currentNoteTitle,\n            onChange: e => {\n              let val = e.target.value.toString().toLowerCase().replace(/\\b(\\w)/g, x => x.toUpperCase());\n              setCurrentNoteTitle(val.trim() == \"\" ? null : val);\n            },\n            style: {\n              fontWeight: '700',\n              textTransform: 'capitalize'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Editor, {\n            onInit: (evt, editor) => editorRef.current = editor,\n            initialValue: currentNoteBody,\n            init: {\n              height: 500,\n              menubar: false,\n              plugins: ['advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview', 'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen', 'insertdatetime', 'media', 'table', 'code', 'help', 'wordcount'],\n              toolbar: 'undo redo | ' + 'bold italic forecolor | alignleft aligncenter ' + 'alignright alignjustify | bullist numlist outdent indent | ' + 'removeformat | help',\n              content_style: 'body {font-weight: 300; font-size:14px;}'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 34\n        }, this), !edit && currentNoteId && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(Viewer, {\n            close: closeViewer,\n            loading: loadingNoteBody,\n            rawHtmlBody: currentNoteBody,\n            noteId: currentNoteId,\n            title: currentNoteTitle,\n            bookTitle: currentBook\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 45\n          }, this)\n        }, void 0, false), !currentNoteId && currentNoteId != \"\" && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            paddingTop: '50px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: noteMaker,\n            style: {\n              width: '30%'\n            },\n            alt: \"noteMaker\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 92\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 58\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        style: {\n          overflowY: 'scroll',\n          height: '75vh'\n        },\n        xs: {\n          span: 0\n        },\n        md: {\n          span: 6\n        },\n        align: \"center\",\n        children: [!edit && !newNoteWindow && /*#__PURE__*/_jsxDEV(\"div\", {\n          align: \"left\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            style: {\n              color: btnBackgroundColor\n            },\n            align: \"left\",\n            children: \"Books and collections\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n            text: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\" \", /*#__PURE__*/_jsxDEV(PlusCircleOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 37\n              }, this), \" New collection \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 30\n            }, this),\n            onClick: () => {\n              setNewNoteWindow(true);\n              setCurrentNoteId(\"\");\n              setCurrentNoteTitle('Sample Note');\n              setCurrentNoteBody(\"<p>This is the first note of this collection, you can delete it later\");\n              document.getElementById('collectionName').focus();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            style: {\n              fontWeight: '700',\n              width: '100%',\n              border: '0px'\n            },\n            defaultActiveKey: ['0'],\n            onChange: () => {},\n            align: \"left\",\n            children: notes ? Object.keys(notes).length !== 0 ? Object.keys(notes).map((Key, i) => {\n              return notes[Key].find(x => x.deleted !== true) ? /*#__PURE__*/_jsxDEV(Collapse.Panel, {\n                style: {\n                  border: `0px solid silver`,\n                  borderBottom: '0px'\n                },\n                header: Key,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  align: \"left\",\n                  children: [/*#__PURE__*/_jsxDEV(Button, {\n                    type: \"link\",\n                    style: {\n                      border: `1px solid ${btnBackgroundColor}`,\n                      color: 'black'\n                    },\n                    onClick: () => {\n                      setNewNoteWindow(true);\n                      setCurrentNoteId(\"\");\n                      setCurrentBook(Key);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\" \", /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 256,\n                        columnNumber: 186\n                      }, this), \" Add new note \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 256,\n                      columnNumber: 179\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 9\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 1\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 1\n                  }, this), notes[Key].map(note => {\n                    return !note.deleted ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(Button, {\n                        align: \"left\",\n                        title: note.noteTitle,\n                        style: {\n                          maxWidth: '70%',\n                          color: btnBackgroundColor,\n                          overflow: 'hidden',\n                          textOverflow: 'ellipsis'\n                        },\n                        onClick: () => {\n                          // fetch note and set the variables in state with the returned data\n                          console.log(Key.toString(), note.noteId, note.noteTitle);\n                          setCurrentBook(Key.toString());\n                          setCurrentNoteTitle(note.noteTitle);\n                          setCurrentNoteId(note.noteId);\n                        },\n                        type: \"link\",\n                        children: note.noteTitle\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 262,\n                        columnNumber: 33\n                      }, this), \"\\xA0\", currentNoteId === note.noteId && /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(EditOutlined, {\n                          title: \"edit\",\n                          onClick: () => {\n                            // setCurrentBook(Key.toString()); setCurrentNoteTitle(note.noteTitle); setCurrentNoteId(note.noteId); setCurrentNoteBody(\"lolpoo\");\n                            setEdit(true);\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 271,\n                          columnNumber: 72\n                        }, this), \"\\xA0 \\xA0\", /*#__PURE__*/_jsxDEV(DeleteOutlined, {\n                          style: {\n                            fontSize: ''\n                          },\n                          onClick: () => {\n                            setDeleteNoteProcess(true);\n\n                            if (window.confirm(\"Are you sure you want to delete this note?\")) {\n                              axios.put(API_BASE + '/api/notes/deleteNote', {\n                                \"authorId\": localStorage.getItem('bitsjoy_userId'),\n                                \"bookTitle\": currentBook,\n                                \"noteId\": currentNoteId\n                              }, {\n                                headers: {\n                                  'Authorization': localStorage.getItem(bearer_token_key),\n                                  'Content-Type': 'application/json'\n                                }\n                              }).then(res => {\n                                console.log(res);\n                                setDeleteNoteProcess(false);\n                                window.location.reload(); // setUpdatingNoteProcess(false);\n                              }).catch(err => {\n                                toast.error(err.message); // setUpdatingNoteProcess(false);\n\n                                setDeleteNoteProcess(false);\n                              });\n                            }\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 278,\n                          columnNumber: 37\n                        }, this), \" \", deleteNoteProcess ? /*#__PURE__*/_jsxDEV(SyncOutlined, {\n                          spin: true\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 304,\n                          columnNumber: 37\n                        }, this) : null]\n                      }, void 0, true), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 308,\n                        columnNumber: 34\n                      }, this)]\n                    }, void 0, true) : null;\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 25\n                }, this)\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 71\n              }, this) : null;\n            }) : '' : /*#__PURE__*/_jsxDEV(SyncOutlined, {\n              spin: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 27\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 37\n        }, this), edit && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(ButtonPrimary, {\n            disabledCondition: currentBook == null || currentNoteTitle == null,\n            styl: {\n              width: '70%'\n            },\n            onClick: updateNote,\n            text: updatingNoteProcess ? 'loading' : 'Update'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"link\",\n            onClick: () => {\n              if (window.confirm(\"are you sure? Unsaved changes will be lost\") == true) window.location.reload();\n            },\n            style: {\n              color: btnBackgroundColor\n            },\n            children: [/*#__PURE__*/_jsxDEV(StepBackwardOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 40\n            }, this), \" Back to library\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true), newNoteWindow && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 28\n          }, this), /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n            disabledCondition: currentBook == null || currentNoteTitle == null,\n            styl: {\n              width: '70%'\n            },\n            onClick: saveNote,\n            text: savingNoteProcess ? 'loading' : 'Save'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"link\",\n            onClick: () => {\n              if (window.confirm(\"are you sure? Unsaved changes will be lost\") == true) window.location.reload();\n            },\n            style: {\n              color: btnBackgroundColor\n            },\n            children: [/*#__PURE__*/_jsxDEV(StepBackwardOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 40\n            }, this), \" Back to library\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 1\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(NoteMaker, \"asjsFxjWSLssYZ+LTaod9IN9K/s=\");\n\n_c = NoteMaker;\n\nvar _c;\n\n$RefreshReg$(_c, \"NoteMaker\");","map":{"version":3,"names":["Col","Row","Collapse","Button","Input","axios","React","useEffect","useRef","useState","Viewer","Editor","ButtonPrimary","BackwardFilled","BackwardOutlined","CloseSquareOutlined","DeleteOutlined","EditOutlined","FileAddOutlined","FolderAddOutlined","LoadingOutlined","PlusCircleOutlined","PlusOutlined","StepBackwardOutlined","SyncOutlined","API_BASE","bearer_token_key","toast","noteMaker","btnBackgroundColor","NoteMaker","currentNoteId","setCurrentNoteId","currentNoteTitle","setCurrentNoteTitle","currentBook","setCurrentBook","currentNoteBody","setCurrentNoteBody","edit","setEdit","notes","setNotes","newNoteWindow","setNewNoteWindow","loadingNoteBody","setLoadingNoteBody","savingNoteProcess","setSavingNoteProcess","updatingNoteProcess","setUpdatingNoteProcess","deleteNoteProcess","setDeleteNoteProcess","editorRef","post","email","localStorage","getItem","headers","then","res","Object","keys","data","sort","reduce","accumulator","key","console","log","catch","err","error","message","noteId","idOfAccessor","body","closeViewer","saveNote","current","getContent","date","Date","id","fullName","ppImageLink","window","location","reload","response","updateNote","put","success","span","e","target","value","fontWeight","evt","editor","height","menubar","plugins","toolbar","content_style","val","toString","toLowerCase","replace","x","toUpperCase","trim","textTransform","paddingTop","width","overflowY","color","document","getElementById","focus","border","length","map","Key","i","find","deleted","borderBottom","note","noteTitle","maxWidth","overflow","textOverflow","fontSize","confirm"],"sources":["/Users/neeleshsharma/Desktop/bitsjoy/it-fe/src/pages/noteMaker/index.js"],"sourcesContent":["import { Col, Row, Collapse, Button, Input } from 'antd';\nimport axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport Viewer from './viewer';\nimport { Editor } from '@tinymce/tinymce-react';\nimport ButtonPrimary from '../../components/Button';\nimport { BackwardFilled, BackwardOutlined, CloseSquareOutlined, DeleteOutlined, EditOutlined, FileAddOutlined, FolderAddOutlined, LoadingOutlined, PlusCircleOutlined, PlusOutlined, StepBackwardOutlined, SyncOutlined } from '@ant-design/icons';\nimport { API_BASE } from '../../apiConfig';\nimport { bearer_token_key } from './../../localStorageConfig';\nimport { toast } from 'react-toastify';\nimport { noteMaker } from '../../assets';\nimport { btnBackgroundColor } from '../../uiConfig';\n\n\nexport default function NoteMaker() {\n \n   const [ currentNoteId, setCurrentNoteId] = useState(null);\n   const [ currentNoteTitle, setCurrentNoteTitle] = useState(null);\n   const [ currentBook, setCurrentBook] = useState(null);\n   const [ currentNoteBody, setCurrentNoteBody] = useState(\"<p>No content, edit note to add content</p>\");\n\n  const [ edit, setEdit ] = useState(false);\n  const [notes, setNotes ] = useState(null);\n  const [ newNoteWindow, setNewNoteWindow ] = useState(false);\n\n  const [ loadingNoteBody, setLoadingNoteBody ] = useState(false);\n  const [ savingNoteProcess, setSavingNoteProcess ] = useState(false);\n  const [ updatingNoteProcess, setUpdatingNoteProcess ] = useState(false);\n  const [ deleteNoteProcess, setDeleteNoteProcess ] = useState(false);\n\n\n     \nconst editorRef = useRef(null);\n\n  useEffect(()=>{\n    //alert(\"1\");\n    if(notes == null){\n    axios.post(API_BASE + '/api/user/getUserNotes', {\n        email: localStorage.getItem('bitsjoy_email')\n    }, { \n        headers : {\n        'Authorization' : localStorage.getItem(bearer_token_key),\n        'Content-Type': 'application/json'\n    }}).then(res => {\n        \n        setNotes(Object.keys(res.data.notes)\n        .sort()\n        .reduce((accumulator, key) => {\n          accumulator[key] = res.data.notes[key];\n      \n          return accumulator;\n        }, {}));\n        console.log(res.data);\n    }).catch((err) => {\n        toast.error(err.message);\n    })\n}\n  }, [])\n\n\n  useEffect(()=>{ \n    if(currentNoteId != null && currentNoteId != \"\"){\n    setLoadingNoteBody(true);\n    console.log(currentNoteId);\n    axios.post(API_BASE + '/api/notes/getNote', {\n        noteId: currentNoteId,\n        idOfAccessor: localStorage.getItem('bitsjoy_userId')\n    },{\n        headers : {\n            'Authorization' : localStorage.getItem(bearer_token_key),\n            'Content-Type': 'application/json'\n        }\n    }).then((res)=>{\n        setCurrentNoteBody(res.data.body)\n    setLoadingNoteBody(false);\n\n      //  alert(res.data.body);\n    }).catch((err)=>{\n        toast.error(err.message);\n    setLoadingNoteBody(false);\n\n    })}\n  }, [currentNoteId])\n\n  const closeViewer = () => {\n    setCurrentNoteId(null);\n  }\n\n\n  const saveNote = () => {\n    console.log(editorRef.current.getContent());\n    setSavingNoteProcess(true);\n    const date = new Date();\n    if (editorRef.current) {\n      console.log(editorRef.current.getContent());\n\n      axios.post(API_BASE + '/api/notes/createNote', { \n        \"dateUpdated\": date,\n        \"dateCreated\": date,\n        \"title\": currentNoteTitle,\n        \"body\": editorRef.current.getContent() == \"\" ? \"<i>No content, edit note to add content</i>\": editorRef.current.getContent(),\n        \"author\": {\n            id: localStorage.getItem('bitsjoy_userId'),\n            fullName: localStorage.getItem('bitsjoy_name'),\n            ppImageLink: localStorage.getItem('bitsjoy_ppImageLink'),\n        },\n        \"accessibleTo\": [localStorage.getItem('bitsjoy_userId')],\n        \"bookTitle\": currentBook, \n      },\n      {\n        headers : {\n            'Authorization' : localStorage.getItem(bearer_token_key),\n            'Content-Type': 'application/json'\n        }\n      }).then((res)=>{\n        console.log(res);\n        window.location.reload();\n    setSavingNoteProcess(false);\n      }).catch(err => {   \n        toast.error(err.response.data.message);\n    setSavingNoteProcess(false);\n\n      })\n    }\n  };\n\n\n  const updateNote = () => {\n    setUpdatingNoteProcess(true);\n    const date = new Date();\n    if (editorRef.current) {\n      console.log(editorRef.current.getContent());\n\n      axios.put(API_BASE + '/api/notes/updateNote', { \n        \"dateUpdated\": date,\n        \"title\": currentNoteTitle,\n        \"noteBody\": editorRef.current.getContent() == \"\" ? \"<i>No content, edit note to add content</i>\": editorRef.current.getContent(),\n        \"authorId\": localStorage.getItem('bitsjoy_userId'),\n        \"accessibleTo\": [localStorage.getItem('bitsjoy_userId')],\n        \"bookTitle\": currentBook,\n        \"noteId\": currentNoteId\n      },\n      {\n        headers : {\n            'Authorization' : localStorage.getItem(bearer_token_key),\n            'Content-Type': 'application/json'\n        }\n      }).then((res)=>{\n        console.log(res);\n        toast.success(\"Note updated\");\n    setUpdatingNoteProcess(false);\n      }).catch(err => {  \n        toast.error(err.data.response.message);\n    setUpdatingNoteProcess(false);\n\n      })\n    }\n  };\n \n\n  return ( \n    <>\n      <Row id=\"lp\" align=\"center\">\n        <Col xs={{span: 0}} md={{span: 18}}>\n            {\n                edit && <div align=\"right\">\n                <Input required type=\"text\" value={currentNoteTitle} onChange={(e)=>{\n                    setCurrentNoteTitle(e.target.value);\n                }} style={{fontWeight: '700'}} />\n                <br/>\n                <br/>\n                <Editor  \n                  onInit={(evt, editor) => editorRef.current = editor}\n                  initialValue={currentNoteBody}\n                  init={{ \n                    height: 500,\n                    menubar: false,\n                    plugins: [\n                      'advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview',\n                      'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen',\n                      'insertdatetime', 'media', 'table', 'code', 'help', 'wordcount'\n                    ],\n                    toolbar: 'undo redo | ' +\n                      'bold italic forecolor | alignleft aligncenter ' +\n                      'alignright alignjustify | bullist numlist outdent indent | ' +\n                      'removeformat | help',\n                    content_style: 'body {font-weight: 300; font-size:14px;}'\n                  }}\n                />  \n              </div> \n            }\n\n\n{\n                newNoteWindow && <div align=\"left\">\n                Collection Name: <Input id=\"collectionName\" type=\"text\" value={currentBook} onChange={(e)=>{\n                   \n                    let val = e.target.value.toString().toLowerCase().replace(/\\b(\\w)/g, x => x.toUpperCase());\n                    setCurrentBook(val.trim() == \"\" ? null : val);\n                }} style={{fontWeight: '700', textTransform: 'capitalize'}} /> \n                \n                    <br/>\n                <br/>\n                Note Title : <Input type=\"text\" value={currentNoteTitle} onChange={(e)=>{\n                    let val = e.target.value.toString().toLowerCase().replace(/\\b(\\w)/g, x => x.toUpperCase());\n                    setCurrentNoteTitle(val.trim() == \"\" ? null : val);\n                }} style={{fontWeight: '700', textTransform: 'capitalize'}} />\n                <br/>\n                <br/>\n                <Editor  \n                  onInit={(evt, editor) => editorRef.current = editor}\n                  initialValue={currentNoteBody}\n                  init={{ \n                    height: 500,\n                    menubar: false,\n                    plugins: [\n                      'advlist', 'autolink', 'lists', 'link', 'image', 'charmap', 'preview',\n                      'anchor', 'searchreplace', 'visualblocks', 'code', 'fullscreen',\n                      'insertdatetime', 'media', 'table', 'code', 'help', 'wordcount'\n                    ],\n                    toolbar: 'undo redo | ' +\n                      'bold italic forecolor | alignleft aligncenter ' +\n                      'alignright alignjustify | bullist numlist outdent indent | ' +\n                      'removeformat | help',\n                    content_style: 'body {font-weight: 300; font-size:14px;}'\n                  }}\n                />  \n              </div> \n            }\n\n            {\n                !edit && currentNoteId && <><Viewer close={closeViewer} loading={loadingNoteBody} rawHtmlBody={currentNoteBody} noteId={currentNoteId} title={currentNoteTitle} bookTitle={currentBook}/></>\n            }\n            {\n                !currentNoteId && currentNoteId != \"\" && <div style={{paddingTop: '50px'}}><img src={noteMaker} style={{width: '30%'}} alt=\"noteMaker\" />\n                \n                \n                </div>\n            }\n             \n        </Col>\n        \n        <Col style={{overflowY: 'scroll', height: '75vh'}} xs={{span: 0}} md={{span: 6}} align=\"center\">\n            \n        {!edit && !newNoteWindow && <div align=\"left\"><h3 style={{color: btnBackgroundColor}} align=\"left\">Books and collections</h3> \n        <ButtonPrimary text={<span> <PlusCircleOutlined /> New collection </span>} onClick={()=>{setNewNoteWindow(true); setCurrentNoteId(\"\"); setCurrentNoteTitle('Sample Note'); setCurrentNoteBody(\"<p>This is the first note of this collection, you can delete it later\"); \n        document.getElementById('collectionName').focus();\n    }}></ButtonPrimary>\n        <br/>\n        <br/>\n        <Collapse style={{fontWeight: '700', width: '100%',  border: '0px',}} defaultActiveKey={['0']} onChange={()=>{}} align=\"left\">\n            {\n                notes ? Object.keys(notes).length !== 0 ? Object.keys(notes).map((Key, i) => {\n                    return notes[Key].find(x => x.deleted !== true) ? <Collapse.Panel style={{border: `0px solid silver`, borderBottom: '0px'}} header={Key} key={i}>\n                        <div align=\"left\">\n        <Button type=\"link\" style={{border: `1px solid ${btnBackgroundColor}`, color: 'black'}} onClick={()=>{setNewNoteWindow(true); setCurrentNoteId(\"\"); setCurrentBook(Key)}}><span> <PlusOutlined /> Add new note </span></Button>\n<br/>\n<br/>\n                        {\n                            notes[Key].map(note => {\n                                return  !note.deleted ? <> \n                                <Button align=\"left\" title={note.noteTitle} style={{maxWidth: '70%', color: btnBackgroundColor,\n                                overflow: 'hidden', textOverflow: 'ellipsis'}} onClick={()=>{\n                                    // fetch note and set the variables in state with the returned data\n                                  \n                                    console.log(Key.toString(), note.noteId, note.noteTitle);\n                                    setCurrentBook(Key.toString()); setCurrentNoteTitle(note.noteTitle); setCurrentNoteId(note.noteId);\n                                }} type=\"link\">{note.noteTitle}</Button> \n                                &nbsp;\n                                {\n                                    currentNoteId === note.noteId && <><EditOutlined  title=\"edit\"  onClick={()=>{\n                                        // setCurrentBook(Key.toString()); setCurrentNoteTitle(note.noteTitle); setCurrentNoteId(note.noteId); setCurrentNoteBody(\"lolpoo\");\n                                        setEdit(true);\n                                    }}/>\n                                &nbsp;\n                                &nbsp;\n\n                                    <DeleteOutlined style={{fontSize:''}} onClick={()=>{\n                                        setDeleteNoteProcess(true);\n                if(window.confirm(\"Are you sure you want to delete this note?\")){\n                    axios.put(API_BASE+ '/api/notes/deleteNote', { \n                        \"authorId\": localStorage.getItem('bitsjoy_userId'), \n                        \"bookTitle\": currentBook,\n                        \"noteId\": currentNoteId\n                      },\n                      {\n                        headers : {\n                            'Authorization' : localStorage.getItem(bearer_token_key),\n                            'Content-Type': 'application/json'\n                        }\n                      }).then((res)=>{\n                        console.log(res);\n                        setDeleteNoteProcess(false);\n                        window.location.reload();\n                   // setUpdatingNoteProcess(false);\n                      }).catch(err => {  \n                        toast.error(err.message);\n                    // setUpdatingNoteProcess(false);\n                    setDeleteNoteProcess(false);\n                \n                      })\n                }\n            }}/> {\n                deleteNoteProcess ? <SyncOutlined spin /> : null\n            }\n                                    </>\n                                 }\n                                 <br/>\n                                {/* <DeleteOutlined style={{position: 'absolute', right: '5px'}}/> */}\n                                </> : null\n                            })\n                        }\n\n\n                        </div>\n                    </Collapse.Panel> : null\n                }) : '' : <SyncOutlined spin />\n            }\n    </Collapse></div>}\n\n    {\n        edit && <><ButtonPrimary disabledCondition={currentBook == null || currentNoteTitle == null} styl={{width: '70%'}} onClick={updateNote} text={updatingNoteProcess ? 'loading' : 'Update'}></ButtonPrimary>\n        <br/>\n<br/>\n<Button type=\"link\" onClick={()=>{ \n   if(window.confirm(\"are you sure? Unsaved changes will be lost\") == true) window.location.reload();\n}} style={{color: btnBackgroundColor}}><StepBackwardOutlined /> Back to library</Button></>\n    }\n\n{\n        newNoteWindow && <><br/><ButtonPrimary disabledCondition={currentBook == null || currentNoteTitle == null} styl={{width: '70%'}} onClick={saveNote} text={savingNoteProcess ? 'loading' : 'Save'}></ButtonPrimary>\n<br/>\n<br/>\n<Button type=\"link\" onClick={()=>{ \n   if(window.confirm(\"are you sure? Unsaved changes will be lost\") == true) window.location.reload();\n}} style={{color: btnBackgroundColor}}><StepBackwardOutlined /> Back to library</Button>\n\n\n</>\n    }\n        </Col>\n      </Row>\n    </> \n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}