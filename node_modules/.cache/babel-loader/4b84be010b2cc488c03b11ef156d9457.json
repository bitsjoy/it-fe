{"ast":null,"code":"import{SyncOutlined}from'@ant-design/icons';import axios from'axios';import React,{useEffect}from'react';import{useNavigate}from'react-router-dom';import{toast}from'react-toastify';import{API_BASE}from'../../apiConfig';import ButtonPrimary from'../../components/Button';import{bearer_token_key}from'../../localStorageConfig';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function VerifyOneTime(){var navigate=useNavigate();useEffect(function(){console.log(window.location.href.split(\"=\")[1]);axios.post(API_BASE+'/api/user/setUserOwnedProducts',{email:localStorage.getItem('bitsjoy_email'),paymentId:window.location.href.split(\"=\")[1],product:localStorage.getItem('payment_for_product')},{headers:{'Authorization':localStorage.getItem(bearer_token_key),'Content-Type':'application/json'}}).then(function(res){console.log(res);if(res.data.ownedProducts.includes(\"Notes\")){document.getElementById(\"verifying\").style.color='#29AB87';document.getElementById(\"verifying\").innerHTML=\"Congratulations!<br/><br/> <img style='width: 40%' src='https://c.tenor.com/4blWuIh5MIYAAAAC/baby-yoda.gif' />\";document.getElementById('make_notes').style.display='block';localStorage.removeItem('payment_for_product');}else{window.location.reload();localStorage.removeItem('payment_for_product');}}).catch(function(err){toast.error('err.response.message');});return function(){};},[]);return/*#__PURE__*/_jsxs(\"div\",{align:\"center\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h2\",{style:{color:'orange'},id:\"verifying\",children:[\"Verifying payment \",/*#__PURE__*/_jsx(SyncOutlined,{spin:true})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ButtonPrimary,{id:\"make_notes\",styl:{display:'none'},text:\"Make Notes\",onClick:function onClick(){navigate('/notes');}})})]});}","map":{"version":3,"names":["SyncOutlined","axios","React","useEffect","useNavigate","toast","API_BASE","ButtonPrimary","bearer_token_key","VerifyOneTime","navigate","console","log","window","location","href","split","post","email","localStorage","getItem","paymentId","product","headers","then","res","data","ownedProducts","includes","document","getElementById","style","color","innerHTML","display","removeItem","reload","catch","err","error"],"sources":["/Users/neeleshsharma/Desktop/bitsjoy/it-fe-/src/pages/verifyOneTimePayment/index.js"],"sourcesContent":["import { SyncOutlined } from '@ant-design/icons'\nimport axios from 'axios';\nimport React, { useEffect } from 'react' \nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { API_BASE } from '../../apiConfig';\nimport ButtonPrimary from '../../components/Button';\nimport { bearer_token_key } from '../../localStorageConfig'; \n\nexport default function VerifyOneTime() {\n \n    let navigate = useNavigate();\n\n    useEffect(() => {\n        console.log(window.location.href.split(\"=\")[1]);\n        axios.post(API_BASE + '/api/user/setUserOwnedProducts', {\n            email: localStorage.getItem('bitsjoy_email'),\n            paymentId: window.location.href.split(\"=\")[1],\n            product: localStorage.getItem('payment_for_product'),\n        },{ \n          headers : {\n          'Authorization' : localStorage.getItem(bearer_token_key),\n          'Content-Type': 'application/json'\n      }}).then(res => {\n        console.log(res);\n            if(res.data.ownedProducts.includes(\"Notes\")){ \n                document.getElementById(\"verifying\").style.color = '#29AB87';\n                document.getElementById(\"verifying\").innerHTML = \"Congratulations!<br/><br/> <img style='width: 40%' src='https://c.tenor.com/4blWuIh5MIYAAAAC/baby-yoda.gif' />\";\n               document.getElementById('make_notes').style.display = 'block';\n               localStorage.removeItem('payment_for_product');\n      \n            } else { \n                 window.location.reload();\n               localStorage.removeItem('payment_for_product');\n\n            }\n      }).catch((err) => {\n        toast.error('err.response.message');\n      })\n    \n      return () => {\n      \n      }\n    }, [])\n    \n  return (\n    <div align=\"center\">\n        <br/>\n        <br/>\n        <h2 style={{color: 'orange'}} id=\"verifying\">Verifying payment <SyncOutlined spin/></h2>\n        <br/>\n        <div>\n            {/* <h2 style={{color: 'orange'}}>Now you have the lifetime access to Notes</h2> */}\n        <ButtonPrimary id=\"make_notes\" styl={{display: 'none'}} text=\"Make Notes\" onClick={() => {\n            navigate('/notes');\n        }} />\n        </div>\n    </div>\n  )\n}\n"],"mappings":"AAAA,OAASA,YAAT,KAA6B,mBAA7B,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,QAAT,KAAyB,iBAAzB,CACA,MAAOC,cAAP,KAA0B,yBAA1B,CACA,OAASC,gBAAT,KAAiC,0BAAjC,C,wFAEA,cAAe,SAASC,cAAT,EAAyB,CAEpC,GAAIC,SAAQ,CAAGN,WAAW,EAA1B,CAEAD,SAAS,CAAC,UAAM,CACZQ,OAAO,CAACC,GAAR,CAAYC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAAZ,EACAf,KAAK,CAACgB,IAAN,CAAWX,QAAQ,CAAG,gCAAtB,CAAwD,CACpDY,KAAK,CAAEC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAD6C,CAEpDC,SAAS,CAAER,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAFyC,CAGpDM,OAAO,CAAEH,YAAY,CAACC,OAAb,CAAqB,qBAArB,CAH2C,CAAxD,CAIE,CACAG,OAAO,CAAG,CACV,gBAAkBJ,YAAY,CAACC,OAAb,CAAqBZ,gBAArB,CADR,CAEV,eAAgB,kBAFN,CADV,CAJF,EAQEgB,IARF,CAQO,SAAAC,GAAG,CAAI,CACdd,OAAO,CAACC,GAAR,CAAYa,GAAZ,EACI,GAAGA,GAAG,CAACC,IAAJ,CAASC,aAAT,CAAuBC,QAAvB,CAAgC,OAAhC,CAAH,CAA4C,CACxCC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CC,KAA3C,CAAmD,SAAnD,CACAH,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCG,SAArC,CAAiD,gHAAjD,CACDJ,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CG,OAA5C,CAAsD,OAAtD,CACAf,YAAY,CAACgB,UAAb,CAAwB,qBAAxB,EAEF,CAND,IAMO,CACFtB,MAAM,CAACC,QAAP,CAAgBsB,MAAhB,GACFjB,YAAY,CAACgB,UAAb,CAAwB,qBAAxB,EAEF,CACN,CArBC,EAqBCE,KArBD,CAqBO,SAACC,GAAD,CAAS,CAChBjC,KAAK,CAACkC,KAAN,CAAY,sBAAZ,EACD,CAvBC,EAyBF,MAAO,WAAM,CAEZ,CAFD,CAGD,CA9BQ,CA8BN,EA9BM,CAAT,CAgCF,mBACE,aAAK,KAAK,CAAC,QAAX,wBACI,aADJ,cAEI,aAFJ,cAGI,YAAI,KAAK,CAAE,CAACP,KAAK,CAAE,QAAR,CAAX,CAA8B,EAAE,CAAC,WAAjC,6CAA+D,KAAC,YAAD,EAAc,IAAI,KAAlB,EAA/D,GAHJ,cAII,aAJJ,cAKI,kCAEA,KAAC,aAAD,EAAe,EAAE,CAAC,YAAlB,CAA+B,IAAI,CAAE,CAACE,OAAO,CAAE,MAAV,CAArC,CAAwD,IAAI,CAAC,YAA7D,CAA0E,OAAO,CAAE,kBAAM,CACrFxB,QAAQ,CAAC,QAAD,CAAR,CACH,CAFD,EAFA,EALJ,GADF,CAcD"},"metadata":{},"sourceType":"module"}